"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};(function(){function b(d,e,g){function a(j,i){if(!e[j]){if(!d[j]){var f="function"==typeof require&&require;if(!i&&f)return f(j,!0);if(h)return h(j,!0);var c=new Error("Cannot find module '"+j+"'");throw c.code="MODULE_NOT_FOUND",c}var k=e[j]={exports:{}};d[j][0].call(k.exports,function(b){var c=d[j][1][b];return a(c||b)},k,k.exports,b,d,e,g)}return e[j].exports}for(var h="function"==typeof require&&require,c=0;c<g.length;c++)a(g[c]);return a}return b})()({1:[function(){},{}],2:[function(){var a=Math.PI,b=Math.floor,c=Math.sqrt,d=Math.min,e=this,f=io();f.on("error",function(a){console.log(a)});var g={};g.debug=!0,g.EffectsStackBuilder=function(a){this._emitter=a},g.EffectsStackBuilder.prototype.emitter=function(){return this._emitter},g.EffectsStackBuilder.prototype.back=function(){return this._emitter},g.EffectsStackBuilder.prototype.createEffect=function(a,b){var c=g.createEffect(a,b).pushTo(this._emitter).back(this);return c.effect().emitter(this._emitter),c},g.createEffect=function(a,b){"object"===("undefined"==typeof a?"undefined":_typeof(a))&&(b=a,a=void 0);var c=new g.Effect;c.opts=b,c.name=a,c.back=null;var d={onCreate:function b(a){return c.onCreate=a,d},onBirth:function b(a){return c.onBirth=a,d},onUpdate:function b(a){return c.onUpdate=a,d},onDeath:function b(a){return c.onDeath=a,d},onPreUpdate:function b(a){return c.onPreUpdate=a,d},onPreRender:function b(a){return c.onPreRender=a,d},onRender:function b(a){return c.onRender=a,d},onPostRender:function b(a){return c.onPostRender=a,d},onIntensityChange:function b(a){return c.onIntensityChange=a,d},pushTo:function b(a){return a.effects().push(c),d},back:function b(a){return void 0===a?c.back:(c.back=a,d)},effect:function a(){return c}};return d},g.Effect=function(){this._emitter=null},g.Effect.prototype.destroy=function(){},g.Effect.prototype.emitter=function(a){return void 0===a?this._emitter:(this._emitter=a,this)},g.createEmitter=function(a){return new g.Emitter(a)},g.Emitter=function(a){this._nParticles=a.nParticles===void 0?100:a.nParticles,this._particles=[],this._effects=[],this._started=!1,this._onUpdated=null,this._intensity=0,this._maxDeltaTime=1/3,this._effectsStackBuilder=new g.EffectsStackBuilder(this)},g.Emitter.prototype.destroy=function(){this._effects.forEach(function(a){a.destroy()}),this._particles.forEach(function(a){a.destroy()})},g.Emitter.prototype.effects=function(){return this._effects},g.Emitter.prototype.effect=function(a){for(var b,c=0;c<this._effects.length;c++)if(b=this._effects[c],b.name===a)return b;return null},g.Emitter.prototype.particles=function(){return this._particles},g.Emitter.prototype.liveParticles=function(){return this._liveParticles},g.Emitter.prototype.deadParticles=function(){return this._deadParticles},g.Emitter.prototype.nParticles=function(){return this._nParticles},g.Emitter.prototype.effectsStackBuilder=function(){return this._effectsStackBuilder},g.Emitter.prototype.intensity=function(a){if(void 0===a)return this._intensity;if(a===this._intensity)return this;g.debug&&console.assert(0<=a,"Fireworks.Emitter.intensity: invalid value.",a),g.debug&&console.assert(1>=a,"Fireworks.Emitter.intensity: invalid value.",a);var b=this._intensity;return this._intensity=a,this._effects.forEach(function(a){a.onIntensityChange&&a.onIntensityChange(this._intensity,b)}.bind(this)),this},g.Emitter.prototype.maxDeltaTime=function(a){return void 0===a?this._maxDeltaTime:(this._maxDeltaTime=a,this)},g.Emitter.prototype.setParticleData=function(a,b,c){a[b]=c},g.Emitter.prototype.getParticleData=function(a,b){return a[b]},g.Emitter.prototype.start=function(){console.assert(0<this._effects.length,"At least one effect MUST be set"),console.assert(!1===this._started),this._particles=Array(this._nParticles);for(var a=0;a<this._nParticles;a++)this._particles[a]=new g.Particle;return this._liveParticles=[],this._deadParticles=this._particles.slice(0),this._started=!0,this._effects.forEach(function(a){a.onCreate&&this._particles.forEach(function(b,c){a.onCreate(b,c)})}.bind(this)),this.intensity(1),this},g.Emitter.prototype.update=function(a){return a=d(this._maxDeltaTime,a),this._effects.forEach(function(b){b.onPreUpdate&&b.onPreUpdate(a)}.bind(this)),this._effects.forEach(function(b){b.onUpdate&&this._liveParticles.forEach(function(c){b.onUpdate(c,a)})}.bind(this)),this},g.Emitter.prototype.render=function(){return this._effects.forEach(function(a){a.onPreRender&&a.onPreRender()}.bind(this)),this._effects.forEach(function(a){a.onRender&&this._liveParticles.forEach(function(b){a.onRender(b)})}.bind(this)),this._effects.forEach(function(a){a.onPostRender&&a.onPostRender()}.bind(this)),this},g.Emitter.prototype.killParticle=function(a){var b=this._liveParticles.indexOf(a);g.debug&&console.assert(-1!==b),this._liveParticles.splice(b,1),this._deadParticles.push(a),this.effects().forEach(function(b){b.onDeath&&b.onDeath(a)}.bind(this))},g.Emitter.prototype.spawnParticle=function(){g.debug&&console.assert(1<=this._deadParticles.length,"no more particle available");var a=this.deadParticles().pop();this.liveParticles().push(a),this.effects().forEach(function(b){b.onBirth&&b.onBirth(a)}.bind(this))},g.createLinearGradient=function(a){var b=new g.LinearGradient(a);return b},g.LinearGradient=function(){this._keyPoints=[]},g.LinearGradient.prototype.push=function(a,b){return this._keyPoints.push({x:a,y:b}),this},g.LinearGradient.prototype.get=function(a){for(var b,c=0;c<this._keyPoints.length&&(b=this._keyPoints[c],!(a<=b.x));c++);if(0===c)return this._keyPoints[0].y;g.debug&&console.assert(c<this._keyPoints.length);var d=this._keyPoints[c-1],e=this._keyPoints[c],f=(a-d.x)/(e.x-d.x),h=d.y+f*(e.y-d.y);return h},g.Particle=function(){},g.Particle.prototype.set=function(a,b){return g.debug&&console.assert(void 0===this[a],"key already defined: "+a),this[a]=b,this[a]},g.Particle.prototype.get=function(a){return g.debug&&console.assert(void 0!==this[a],"key undefined: "+a),this[a]},g.Particle.prototype.has=function(a){return this[a]!==void 0},g.Shape=function(){},g.createVector=function(a,b,c){return new g.Vector(a,b,c)},g.Vector=function(a,b,c){this.x=a||0,this.y=b||0,this.z=c||0},g.Vector.prototype={constructor:g.Vector,set:function d(a,b,c){return this.x=a,this.y=b,this.z=c,this},setX:function b(a){return this.x=a,this},setY:function b(a){return this.y=a,this},setZ:function b(a){return this.z=a,this},random:function a(){return this.x=Math.random()-.5,this.y=Math.random()-.5,this.z=Math.random()-.5,this},toString:function a(){return JSON.stringify(this)},copy:function b(a){return this.x=a.x,this.y=a.y,this.z=a.z,this},add:function b(c,a){return this.x=c.x+a.x,this.y=c.y+a.y,this.z=c.z+a.z,this},addSelf:function b(a){return this.x+=a.x,this.y+=a.y,this.z+=a.z,this},addScalar:function b(a){return this.x+=a,this.y+=a,this.z+=a,this},sub:function b(c,a){return this.x=c.x-a.x,this.y=c.y-a.y,this.z=c.z-a.z,this},subSelf:function b(a){return this.x-=a.x,this.y-=a.y,this.z-=a.z,this},multiply:function b(c,a){return this.x=c.x*a.x,this.y=c.y*a.y,this.z=c.z*a.z,this},multiplySelf:function b(a){return this.x*=a.x,this.y*=a.y,this.z*=a.z,this},multiplyScalar:function b(a){return this.x*=a,this.y*=a,this.z*=a,this},divideSelf:function b(a){return this.x/=a.x,this.y/=a.y,this.z/=a.z,this},divideScalar:function b(a){return a?(this.x/=a,this.y/=a,this.z/=a):(this.x=0,this.y=0,this.z=0),this},negate:function a(){return this.multiplyScalar(-1)},dot:function b(a){return this.x*a.x+this.y*a.y+this.z*a.z},lengthSq:function a(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function a(){return c(this.lengthSq())},normalize:function a(){return this.divideScalar(this.length())},setLength:function b(a){return this.normalize().multiplyScalar(a)},cross:function b(c,a){return this.x=c.y*a.z-c.z*a.y,this.y=c.z*a.x-c.x*a.z,this.z=c.x*a.y-c.y*a.x,this},crossSelf:function e(a){var b=this.x,c=this.y,d=this.z;return this.x=c*a.z-d*a.y,this.y=d*a.x-b*a.z,this.z=b*a.y-c*a.x,this},distanceTo:function b(a){return c(this.distanceToSquared(a))},distanceToSquared:function b(a){return new g.Vector().sub(this,a).lengthSq()},equals:function b(a){return a.x===this.x&&a.y===this.y&&a.z===this.z},isZero:function a(){return 1e-4>this.lengthSq()},clone:function a(){return new g.Vector(this.x,this.y,this.z)}},g.EffectsStackBuilder.prototype.acceleration=function(a){a=a||{};var b=a.effectId||"acceleration";return console.assert(a.shape instanceof g.Shape),g.createEffect(b,{shape:a.shape}).onCreate(function(a){a.acceleration={vector:new g.Vector}}).onBirth(function(a){var b=a.acceleration.vector;this.opts.shape.randomPoint(b)}).onUpdate(function(a,b){var c=a.velocity.vector,d=a.acceleration.vector;c.x+=d.x*b,c.y+=d.y*b,c.z+=d.z*b}).pushTo(this._emitter),this},g.EffectsStackBuilder.prototype.friction=function(a){return a=void 0===a?1:a,console.assert(0<=a&&1>=a),g.createEffect("friction").onCreate(function(b){b.friction={value:a}}).onBirth(function(b){var c=b.friction;c.value=a}).onUpdate(function(a){var b=a.friction.value,c=a.velocity.vector;c.multiplyScalar(b)}).pushTo(this._emitter),this},g.EffectsStackBuilder.prototype.lifeTime=function(a,b){console.assert(void 0!==a),void 0===b&&(b=a),console.assert(void 0!==b);var c=this._emitter;return g.createEffect("lifeTime",{minAge:a,maxAge:b}).onCreate(function(a){var b=a.lifeTime={curAge:0,minAge:0,maxAge:0,normalizedAge:function a(){return(b.curAge-b.minAge)/(b.maxAge-b.minAge)}}}).onBirth(function(a){var b=a.lifeTime;b.curAge=0,b.maxAge=this.opts.minAge+Math.random()*(this.opts.maxAge-this.opts.minAge)}).onUpdate(function(a,b){var d=a.lifeTime;d.curAge+=b,d.curAge>d.maxAge&&c.killParticle(a)}).pushTo(this._emitter),this},g.EffectsStackBuilder.prototype.position=function(a){return console.assert(a instanceof g.Shape),g.createEffect("position",{shape:a}).onCreate(function(a){a.position={vector:new g.Vector}}).onBirth(function(a){var b=a.position.vector;this.opts.shape.randomPoint(b)}).pushTo(this._emitter),this},g.EffectsStackBuilder.prototype.radialVelocity=function(a,b){return g.createEffect("radialVelocity",{minSpeed:a,maxSpeed:b}).onCreate(function(a){a.velocity={vector:new g.Vector}}).onBirth(function(a){var b=a.position.vector,c=a.velocity.vector,d=this.opts.minSpeed+(this.opts.maxSpeed-this.opts.minSpeed)*Math.random();c.copy(b).setLength(d)}).onUpdate(function(a,b){var c=a.position.vector,d=a.velocity.vector;c.x+=d.x*b,c.y+=d.y*b,c.z+=d.z*b}).pushTo(this._emitter),this},g.EffectsStackBuilder.prototype.randomVelocityDrift=function(a){return g.createEffect("randomVelocityDrift",{drift:a}).onUpdate(function(a,b){var c=a.velocity.vector;c.x+=(2*Math.random()-1)*this.opts.drift.x*b,c.y+=(2*Math.random()-1)*this.opts.drift.y*b,c.z+=(2*Math.random()-1)*this.opts.drift.z*b}).pushTo(this._emitter),this},g.EffectsStackBuilder.prototype.velocity=function(a,b){return g.createEffect("velocity",{shape:a,speed:void 0===b?-1:b}).onCreate(function(a){a.velocity={vector:new g.Vector}}).onBirth(function(a){var b=a.velocity.vector;this.opts.shape.randomPoint(b),-1!==this.opts.speed&&b.setLength(this.opts.speed)}).onUpdate(function(a,b){var c=a.position.vector,d=a.velocity.vector;c.x+=d.x*b,c.y+=d.y*b,c.z+=d.z*b}).pushTo(this._emitter),this},g.createShapeBox=function(a,b,c,d,e,f){var h=new g.Vector(a,b,c),i=new g.Vector(d,e,f);return new g.Shape.Box(h,i)},g.Shape.Box=function(a,b){this.position=a,this.size=b,this._vector=new g.Vector},g.Shape.Box.prototype=new g.Shape,g.Shape.Box.prototype.constructor=g.Shape.Box,g.Shape.Box.prototype.contains=function(a){var b=Math.abs,c=this._vector.sub(a,this.position);return!(b(c.x)>this.size.x/2)&&!(b(c.y)>this.size.y/2)&&!(b(c.z)>this.size.z/2)},g.Shape.Box.prototype.randomPoint=function(a){var b=a||this._vector;return b.x=Math.random()*this.size.x-this.size.x/2,b.y=Math.random()*this.size.y-this.size.y/2,b.z=Math.random()*this.size.z-this.size.z/2,b.addSelf(this.position),b},g.createShapePoint=function(a,b,c){var d=new g.Vector(a,b,c);return new g.Shape.Point(d)},g.Shape.Point=function(a){this.position=a,this._vector=new g.Vector},g.Shape.Point.prototype=new g.Shape,g.Shape.Point.prototype.constructor=g.Shape.Point,g.Shape.Point.prototype.contains=function(a){return!(a.x!==this.position.x)&&!(a.y!==this.position.y)&&!(a.z!==this.position.z)},g.Shape.Point.prototype.randomPoint=function(a){var b=a||this._vector;return b.copy(this.position),b},g.createShapeSphere=function(a,b,c,d){var e=new g.Vector(a,b,c);return new g.ShapeSphere(e,d)},g.ShapeSphere=function(a,b){this.position=a,this.radius=b,this._vector=new g.Vector},g.ShapeSphere.prototype=new g.Shape,g.ShapeSphere.prototype.constructor=g.ShapeSphere,g.ShapeSphere.prototype.contains=function(a){var b=this._vector.sub(a,this.position).length();return b<=this.radius},g.ShapeSphere.prototype.randomPoint=function(a){var b=a||this._vector;b.x=Math.random()-.5,b.y=Math.random()-.5,b.z=Math.random()-.5;var c=Math.random()*this.radius;return b.setLength(c),b.addSelf(this.position),b},g.EffectsStackBuilder.prototype.spawnerOneShot=function(a){a=a||this.emitter().nParticles();var b=this.emitter(),c=0,e=!0;return g.createEffect("spawner",{reset:function a(){c=0},start:function a(){e=!0},stop:function a(){e=!1}}).onPreUpdate(function(){if(!1!=e&&a!==c){var f=a-c;f=d(f,b.deadParticles().length);for(var g=0;g<f;g++)b.spawnParticle();c+=f}}).pushTo(this._emitter),this},g.EffectsStackBuilder.prototype.spawnerSteadyRate=function(a){a=void 0===a?1:a;var c=this.emitter(),e=1,f=!0;return g.createEffect("spawner",{rate:a,start:function a(){f=!0},stop:function a(){f=!1}}).onPreUpdate(function(a){var g=this.opts.rate;if(!1!=f){e+=g*a;var h=b(e);h=d(h,c.deadParticles().length),e-=h;for(var j=0;j<h;j++)c.spawnParticle()}}).pushTo(this._emitter),this},g.EffectsStackBuilder.prototype.renderToCanvas=function(c){function d(){if("string"==typeof c.image){var d=[new Image];d[0].src=c.image}else if(c.image instanceof Image)var d=[c.image];else if(c.image instanceof Array)var d=c.image;else console.assert(!1,"invalid .renderToCanvas() options");return f.onCreate(function(b){b.renderToCanvas={scale:1,opacity:1,rotation:0*a}}).onRender(function(a){var c=a.position.vector,f=a.renderToCanvas,g=a.lifeTime.normalizedAge(),h=b(g*d.length),i=d[h];e.save(),e.translate(c.x+j.width/2,c.y+j.height/2),e.scale(f.scale,f.scale),e.rotate(f.rotation),e.globalAlpha=f.opacity,i instanceof Image?e.drawImage(i,-i.width/2,-i.height/2):"object"===("undefined"==typeof i?"undefined":_typeof(i))?e.drawImage(i.image,i.offsetX,i.offsetY,i.width,i.height,-i.width/2,-i.height/2,i.width,i.height):console.assert(!1),e.restore()})}c=c||{};var e=c.ctx||function(){var a=document.createElement("canvas");a.width=window.innerWidth,a.height=window.innerHeight,document.body.appendChild(a),a.style.position="absolute",a.style.left=0,a.style.top=0;var b=a.getContext("2d");return b}(),f=g.createEffect("renderToCanvas",{ctx:e}).pushTo(this._emitter);return"arc"===c.type?function(){return f.onCreate(function(a){a.renderToCanvas={size:3}}).onRender(function(b){var c=b.position.vector,d=b.renderToCanvas.size;e.beginPath(),e.arc(c.x+j.width/2,c.y+j.height/2,d,0,2*a,!0),e.fill()})}(f):"drawImage"===c.type?d(f):console.assert(!1,"renderToCanvas opts.type is invalid: "),this},g.EffectsStackBuilder.prototype.renderToThreejsObject3D=function(a){var b=a.effectId||"renderToThreeParticleSystem",c=a.container;return g.createEffect(b).onCreate(function(b){b.threejsObject3D={object3d:a.create()},g.debug&&console.assert(b.threejsObject3D.object3d instanceof THREE.Object3D);b.threejsObject3D.object3d}).onBirth(function(a){var b=a.threejsObject3D.object3d;c.add(b)}).onDeath(function(a){var b=a.threejsObject3D.object3d;c.remove(b)}).onRender(function(a){var b=a.threejsObject3D.object3d,c=a.position.vector;b.position.set(c.x,c.y,c.z)}).pushTo(this._emitter),this},g.EffectsStackBuilder.prototype.renderToThreejsParticleSystem=function(b){function c(a){for(var b=new THREE.Geometry,c=0;c<a.nParticles();c++)b.vertices.push(new THREE.Vector3);var e=new THREE.ParticleBasicMaterial({size:5,sizeAttenuation:!0,color:14687082,map:d(),blending:THREE.AdditiveBlending,depthWrite:!1,transparent:!0}),f=new THREE.ParticleSystem(b,e);return f.dynamic=!0,f.sortParticles=!0,f}function d(b){b=b||128;var c=document.createElement("canvas"),d=c.getContext("2d");c.width=c.height=b;var e=d.createRadialGradient(c.width/2,c.height/2,0,c.width/2,c.height/2,c.width/2);e.addColorStop(0,"rgba(255,255,255,1)"),e.addColorStop(.5,"rgba(255,255,255,1)"),e.addColorStop(.7,"rgba(128,128,128,1)"),e.addColorStop(1,"rgba(0,0,0,1)"),d.beginPath(),d.arc(b/2,b/2,b/2,0,2*a,!1),d.closePath(),d.fillStyle=e,d.fill();var f=new THREE.Texture(c);return f.needsUpdate=!0,f}b=b||{};var e=b.effectId||"renderToThreejsParticleSystem",f=b.particleSystem||c;"function"==typeof f&&(f=f(this._emitter)),console.assert(f instanceof THREE.ParticleSystem,"particleSystem MUST be THREE.ParticleSystem");var h=f.geometry;return console.assert(h.vertices.length>=this._emitter.nParticles()),g.createEffect(e,{particleSystem:f}).onCreate(function(a,b){a.threejsParticle={particleIdx:b};var c=h.vertices[b];c.set(1/0,1/0,1/0)}).onDeath(function(a){var b=a.threejsParticle.particleIdx,c=h.vertices[b];c.set(1/0,1/0,1/0)}).onRender(function(a){var b=a.threejsParticle.particleIdx,c=h.vertices[b],d=a.position.vector;c.set(d.x,d.y,d.z)}).pushTo(this._emitter),this},g.Emitter.prototype.bindTriggerDomEvents=function(a){new g.BindTriggerDomEvents(this,a);return this};var h,i;g.BindTriggerDomEvents=function(a,b){this._domElement=b||document.body,this._onMouseDown=function(){a.effect("spawner").opts.start()},h=function(){a.effect("spawner").opts.start()},this._onMouseUp=function(){a.effect("spawner").opts.stop()},i=function(){a.effect("spawner").opts.stop()},this._domElement.addEventListener("mousedown",this._onMouseDown),this._domElement.addEventListener("mouseup",this._onMouseUp),this._onMouseWheel=function(b){var c=a.intensity();c+=0>b.wheelDelta?-.05:.05,c=Math.max(c,0),c=d(c,1),a.intensity(c)},this._domElement.addEventListener("mousewheel",this._onMouseWheel)},g.BindTriggerDomEvents.prototype.destroy=function(){this._domElement.removeEventListener("mousedown",this._onMouseDown),this._domElement.removeEventListener("mouseup",this._onMouseUp),this._domElement.removeEventListener("mousewheel",this._onMouseWheel)},g.DatGui4Emitter=function(a){var b=new dat.GUI,c=a.effects();return c.forEach(function(a,c){var d=a.name||"effect-"+c,e=a.opts||{},f=Object.keys(e).filter(function(a){return!!(e[a]instanceof g.Vector)||"object"!==_typeof(e[a])});if(f.length){var h=b.addFolder("Effect: "+d);f.forEach(function(a){e[a]instanceof g.Vector?(h.add(e[a],"x").name(a+"X"),h.add(e[a],"y").name(a+"Y"),h.add(e[a],"z").name(a+"Z")):h.add(e,a)})}}),b},g.ProceduralTextures={},g.ProceduralTextures.buildTexture=function(b){b=b||150;var c=document.createElement("canvas"),d=c.getContext("2d");c.width=c.height=b;var e=d.createRadialGradient(c.width/2,c.height/2,0,c.width/2,c.height/2,c.width/2);e.addColorStop(0,"rgba(255,255,255,1)"),e.addColorStop(.5,"rgba(255,255,255,1)"),e.addColorStop(.7,"rgba(128,128,128,1)"),e.addColorStop(1,"rgba(0,0,0,1)"),d.beginPath(),d.arc(b/2,b/2,b/2,0,2*a,!1),d.closePath(),d.fillStyle=e,d.fill();var f=new THREE.Texture(c);return f.needsUpdate=!0,f};var j=document.createElement("canvas");j.width=window.innerWidth,j.height=window.innerHeight,document.body.appendChild(j),j.style.position="absolute",j.style.left=0,j.style.top=0,j.style.zIndex=1,j.style.transform="rotate(-90deg) ";var k=j.getContext("2d");k.fillStyle="rgba(0,0,0,1)",k.fillRect(0,0,j.width,j.height),k.globalAlpha=.5,k.globalCompositeOperation="lighter";(function(a,c){function d(a,c){var d=document.createElement("canvas");d.width=a.width,d.height=a.height;var e=d.getContext("2d");e.drawImage(a,0,0);for(var f=e.getImageData(0,0,d.width,d.height),g=f.data,h=0,j=0;j<d.height;j++)for(var k,l=0;l<d.width;l++,h+=4)k=.2126*g[h+0]+.7152*g[h+1]+.0722*g[h+2],k/=255,g[h+3]=b(255*(16*k));e.putImageData(f,0,0);var m=new Image;m.onload=function(){c(m,a)},m.src=e.canvas.toDataURL()}var e=Array(a.length),f=function(){var a,b=[],c=setTimeout(function(){c=null,a._next()},0);return a={destroy:function a(){c&&clearTimeout(c)},par:function e(c,d){return(d||!(b[b.length-1]instanceof Array))&&b.push([]),b[b.length-1].push(c),a},seq:function c(b){return a.par(b,!0)},_next:function l(c,d){for(var e=[],f=[],g=b.shift()||[],h=g.length,j=1==h,k=0;k<g.length;k++)(function(b,g){b(function(b,c){e[g]=b,f[g]=c,0==--h&&a._next(j?e[0]:e,j?f[0]:f)},c,d)})(g[k],k)}}}();return a.forEach(function(a,b){f.par(function(c){var f=new Image;f.onload=function(){d(f,function(a){e[b]=a,c()})},f.src=a})}),void f.seq(function(){c(e,a)})})(["../assets/images/flame/flame00.png","../assets/images/flame/flame01.png","../assets/images/flame/flame02.png","../assets/images/flame/flame03.png","../assets/images/flame/flame04.png","../assets/images/flame/flame05.png","../assets/images/flame/flame06.png","../assets/images/flame/flame07.png","../assets/images/flame/flame08.png","../assets/images/flame/flame09.png","../assets/images/flame/flame10.png","../assets/images/flame/flame11.png","../assets/images/flame/flame12.png","../assets/images/flame/flame13.png","../assets/images/flame/flame14.png","../assets/images/flame/flame15.png","../assets/images/flame/flame16.png","../assets/images/flame/flame17.png","../assets/images/flame/flame18.png","../assets/images/flame/flame19.png","../assets/images/flame/flame20.png","../assets/images/flame/flame21.png","../assets/images/flame/flame22.png","../assets/images/flame/flame23.png","../assets/images/flame/flame24.png"],function(a){console.log("all images loaded");var c=g.createEmitter({nParticles:200}).bindTriggerDomEvents().effectsStackBuilder().spawnerSteadyRate(60).position(g.createShapeSphere(0,0,0,10)).velocity(g.createShapeSphere(800,0,0,150)).acceleration({effectId:"gravity",shape:g.createShapePoint(0,0,0)}).lifeTime(1.5).randomVelocityDrift(g.createVector(0,500,0)).createEffect("renderer").onRender(function(c){var d=c.get("position").vector,e=c.get("lifeTime").normalizedAge(),f=b(e*(a.length-4)),g=a[f+4],h=2*g.width,i=2*g.height,l=d.x-2.25*h,m=d.y-i/2;l+=j.width/2,m+=j.height/2,k.drawImage(g,l,m,h,i)}).back().back().start();setInterval(function(){k.save(),k.globalAlpha=1,k.globalCompositeOperation="copy",k.fillStyle="rgb(0,0,0)",k.fillRect(0,0,j.width,j.height),k.restore(),k.fillStyle="rgba(127,0,255, 0.2)";c.update(1/60).render()},1e3/60)}),console.log(g),f.on("connection",function(a){console.log("connected!!!"),a.on("explode",function(){console.log("explosion!!"),console.log(e),h(),setTimeout(function(){i()},1e3)})}),f.on("explode",function(){console.log("explosion!!"),console.log(e),h(),setTimeout(function(){i()},1e3)})},{}],3:[function(a,b,c){arguments[4][1][0].apply(c,arguments)},{dup:1}]},{},[1,2,3]);
